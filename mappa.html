<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Mappa Interattiva POI 2025</title>
    <!-- CSS di Leaflet per la mappa -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        #map { height: 500px; width: 100%; border-radius: 8px; margin-top: 10px; }
        .controls { background: #f4f4f4; padding: 15px; border-radius: 8px; font-family: sans-serif; }
        input { margin: 5px; padding: 5px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 6px 12px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 4px; }
    </style>
</head>
<body>

    <div class="controls">
        <h3>Inserimento Manuale POI</h3>
        <input type="text" id="lat" placeholder="Latitudine (es. 41.8902)">
        <input type="text" id="lng" placeholder="Longitudine (es. 12.4922)">
        <input type="text" id="poiName" placeholder="Nome del Punto (POI)">
        <button onclick="aggiungiPunto()">Aggiungi sulla Mappa</button>
    </div>

    <!-- Contenitore della mappa -->
    <div id="map"></div>

    <!-- Script Leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Inizializza la mappa centrata sull'Italia
        var map = L.map('map').setView([41.8719, 12.5674], 6);

        // Aggiunge lo strato gratuito di OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        var currentMarker;

        function aggiungiPunto() {
            var lat = document.getElementById('lat').value;
            var lng = document.getElementById('lng').value;
            var nome = document.getElementById('poiName').value || "Nuovo Punto";

            if (lat && lng) {
                // Rimuove il marker precedente se esiste
                if (currentMarker) map.removeLayer(currentMarker);

                // Crea il nuovo marker e lo centra sulla mappa
                currentMarker = L.marker([lat, lng]).addTo(map)
                    .bindPopup(nome)
                    .openPopup();
                
                map.setView([lat, lng], 13); // Zoom automatico sul punto inserito
            } else {
                alert("Per favore, inserisci sia Latitudine che Longitudine.");
            }
        }
    </script>
</body>
</html>
